process TRACKRECONSTRUCTION = {

    untracked PSet maxEvents = {untracked int32 input = 100}
  #service = Timing{}
   
  ######## MessageLogger ########
  service = MessageLogger {
    untracked vstring destinations = { "error.log", "cout"}
    untracked PSet cout = { untracked string threshold = "Error" }
    untracked vstring debugModules   = { "SiStripZeroSuppression", "SiStripClusterizer"}
  }
  ############ File Input ############
  source = PoolSource {
    untracked vstring fileNames =  {
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.0.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.1.root'	    
    }

#    untracked int32 maxEvents = 10
    untracked uint32 debugVebosity = 1
    untracked bool   debugFlag     = true
  }


  ############ Access to ORCOFF via Frontier ############
#-------------------------------------------------


#-------------------------------------------------
## CALIBRATION
#-------------------------------------------------

    ## CABLING
    include "CalibTracker/Configuration/data/SiStrip_FrontierCabling.cfi"
    replace siStripFedCabling.toGet={ { string record = "SiStripFedCablingRcd" string tag = "SiStripCabling_pass4_test_v1"} }
    replace siStripFedCabling.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    replace siStripFedCabling.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"
                    ## PEDESTALS
    include "CalibTracker/Configuration/data/SiStrip_FrontierPedestals.cfi"
    replace siStripPedestals.toGet={   { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_pass4_test_v1_p"}  }
    replace siStripPedestals.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    replace siStripPedestals.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## NOISE
    include "CalibTracker/Configuration/data/SiStrip_FrontierNoise.cfi"
    replace siStripNoise.toGet={ { string record = "SiStripNoisesRcd"     string tag = "SiStripNoises_pass4_test_v1_n"} }
    replace siStripNoise.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    replace siStripNoise.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## GAIN
   # Gain in TBufferStream needs to be uploaded, for the time being use fake source       ## FAKE CONDITIONS
    #include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cfi"
    #include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cfi"
    include "CalibTracker/Configuration/data/SiStrip_FakeGain.cfi"
    include "CalibTracker/Configuration/data/SiStrip_FakeLorentzAngle.cfi"
    include "CalibTracker/Configuration/data/Tracker_FakeAlignment.cfi"

    ## FAKE SiStripQuality
    include "CalibTracker/SiStripESProducers/data/SiStripQualityFakeESSource.cfi"


  
  ############ Digitization ############
   include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
   replace SiStripDigis.ProductLabel="source"

   include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression.cfi"



  ############ Cluster Reconstruction ############
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_RealData.cfi"
  replace siStripClusters.ChannelThreshold    = 2.0
  replace siStripClusters.SeedThreshold       = 3.0
  replace siStripClusters.ClusterThreshold    = 5.0



  ################ MonitorPedestal and Raw Data ################
    # DQM services
    service = DaqMonitorROOTBackEnd{}

    # SiStripMonitorRawData
    include "DQM/SiStripMonitorPedestals/data/SiStripMonitorRawData.cfi"

    # SiStripMonitorPedestals
    include "DQM/SiStripMonitorPedestals/data/SiStripMonitorPedestals.cfi"
    replace PedsMon.OutputMEsInRootFile = true



  sequence digitization   = {SiStripDigis,siStripZeroSuppression}
  sequence local_reco = {siStripMatchedRecHits}
  

  path p = {digitization,PedsMon}



}


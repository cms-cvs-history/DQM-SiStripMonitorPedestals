process TRACKRECONSTRUCTION = {

    untracked PSet maxEvents = {untracked int32 input = 510}
  #service = Timing{}
   
  ######## MessageLogger ########
  service = MessageLogger {
    untracked vstring destinations = { "error.log", "cout"}
    untracked PSet cout = { untracked string threshold = "INFO"}
    untracked PSet error = { untracked string threshold = "INFO"}
    untracked vstring debugModules   = { "SiStripZeroSuppression", "SiStripClusterizer"}
  }
  ############ File Input ############
  source = PoolSource {
    untracked vstring fileNames =  {
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.0.root',
        'rfio:/castor/cern.ch/cms/store/TAC/TIBTOB/edm_2007_03_07/tif.00006215.A.testStorageManager_0.1.root'	    
    }

#    untracked int32 maxEvents = 10
    untracked uint32 debugVebosity = 1
    untracked bool   debugFlag     = true
  }


  ############ Access to ORCOFF via Frontier ############
#-------------------------------------------------


#-------------------------------------------------
## CALIBRATION
#-------------------------------------------------

    ## CABLING
    include "CalibTracker/Configuration/data/SiStrip_FrontierCabling.cfi"
    replace siStripFedCabling.toGet={ { string record = "SiStripFedCablingRcd" string tag = "SiStripCabling_pass4_test_v1"} }
    replace siStripFedCabling.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    replace siStripFedCabling.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## PEDESTALS
    include "CalibTracker/Configuration/data/SiStrip_FrontierPedestals.cfi"
    replace siStripPedestals.toGet={   { string record = "SiStripPedestalsRcd"  string tag = "SiStripPedestals_pass4_test_v1_p"}  }
    replace siStripPedestals.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    replace siStripPedestals.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## NOISE
    include "CalibTracker/Configuration/data/SiStrip_FrontierNoise.cfi"
    replace siStripNoise.toGet={ { string record = "SiStripNoisesRcd"     string tag = "SiStripNoises_pass4_test_v1_n"} }
    replace siStripNoise.connect = "oracle://cms_orcoff_int2r/CMS_COND_STRIP"
    replace siStripNoise.DBParameters.authenticationPath="/afs/cern.ch/cms/DB/conddb"

    ## GAIN
   # Gain in TBufferStream needs to be uploaded, for the time being use fake source       ## FAKE CONDITIONS
    #include "CalibTracker/Configuration/data/SiStrip_FakePedestals.cfi"
    #include "CalibTracker/Configuration/data/SiStrip_FakeNoise.cfi"
    include "CalibTracker/Configuration/data/SiStrip_FakeGain.cfi"
    include "CalibTracker/Configuration/data/SiStrip_FakeLorentzAngle.cfi"
    include "CalibTracker/Configuration/data/Tracker_FakeAlignment.cfi"

    ## FAKE SiStripQuality
    include "CalibTracker/SiStripESProducers/data/SiStripQualityFakeESSource.cfi"


  
  ############ Digitization ############
   include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
   replace SiStripDigis.ProductLabel="source"

   include "RecoLocalTracker/SiStripZeroSuppression/data/SiStripZeroSuppression.cfi"



  ############ Cluster Reconstruction ############
  include "RecoLocalTracker/SiStripClusterizer/data/SiStripClusterizer_RealData.cfi"
  replace siStripClusters.ChannelThreshold    = 2.0
  replace siStripClusters.SeedThreshold       = 3.0
  replace siStripClusters.ClusterThreshold    = 5.0

  # SiStripClusterInfoProducer
  include "AnalysisAlgos/SiStripClusterInfoProducer/data/SiStripClusterInfoProducer.cfi"
# 


############# DQM
  # DQM services
  service = DaqMonitorROOTBackEnd{}

  # tracer service - very verbose - useful for debugging only
#  service = Tracer { untracked string indention = "$$"}

  # can comment out MonitorDeamon if you want to run without DQMCollector - this should go as include in DQMServices
#  include "DQM/SiStripMonitorCluster/data/MonitorDaemon.cfi"
#  replace MonitorDaemon.DestinationAddress = "COLLECTOR.cern.ch"
#  replace MonitorDaemon.UpdateDelay = 5000

  service = DQMShipMonitoring{
   	//event-period for shipping monitoring to collector (default: 25)
    untracked uint32 period = 1000
  }

  ################ MonitorPedestal ################
    # SiStripMonitorPedestals
    include "DQM/SiStripMonitorPedestals/data/SiStripMonitorPedestals.cfi"
    replace PedsMon.OutputMEsInRootFile = true
    include "DQM/SiStripMonitorPedestals/data/SiStripMonitorRawData.cfi"

  ################# SiStripMonitorDigi ################
  include "DQM/SiStripMonitorDigi/data/SiStripMonitorDigi_RealData.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorDigi.SelectAllDetectors = true

  ################ SiStripMonitorCluster ################
  include "DQM/SiStripMonitorCluster/data/SiStripMonitorCluster.cfi"
  # use the following flag to select all detectors (e.g. for mtcc data). by default is false
  replace SiStripMonitorCluster.FillSignalNoiseHistos = false
  replace SiStripMonitorCluster.OutputMEsInRootFile = true
  replace SiStripMonitorCluster.UseCalibDataFromDB = true # this is for the noise service
  replace SiStripMonitorCluster.SelectAllDetectors = true
 
  ################ MonitorTrackGlobal ################
  include "DQM/TrackerMonitorTrack/data/MonitorTrackGlobalWithCTF.cff"
  include "DQM/TrackerMonitorTrack/data/MonitorTrackGlobalWithRS.cff"
  include "DQM/TrackerMonitorTrack/data/MonitorTrackGlobalWithCosmicTF.cff"


  sequence digitization   = {SiStripDigis,siStripZeroSuppression}
  sequence clusterization = {siStripClusters,siStripClusterInfo}
  sequence local_reco = {siStripMatchedRecHits}
  

  path p = {digitization, PedsMon}

#  endpath e = { DIGI-RECO }

}


process PEDESTALS = {
    
    service = MessageLogger {
	untracked vstring destinations = { "./event.log", "./error.log", "./debug.log" }
	untracked PSet error_pedestals_insert_pedRuns.log = { string threshold = "ERROR"   PSet default = { int32 limit = -1 bool noLineBreaks = false } }
	untracked PSet event_pedestals_insert_pedRuns.log = { string threshold = "INFO"    PSet default = { int32 limit = -1 bool noLineBreaks = false } }
	untracked PSet debug_pedestals_insert_pedRuns.log = { string threshold = "DEBUG"   PSet default = { int32 limit = -1 bool noLineBreaks = false } }
	#	untracked vstring debugModules = { "*" } //@@ uncomment this line for debug statements!
    }
    
    
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    include "RecoTracker/GeometryESProducer/data/TrackerRecoGeometryESProducer.cfi"

    service = LockService{ untracked vstring labels = {"source"} }
    
    include "OnlineDB/SiStripESSources/data/BuildFedCablingUsingConfigDb.cfi"
    replace BuildFedCablingUsingConfigDb.UsingDb = true
    replace BuildFedCablingUsingConfigDb.User = "cms_TIB"
    replace BuildFedCablingUsingConfigDb.Passwd = "TrackerInnerBarrel"
    replace BuildFedCablingUsingConfigDb.Path = "cmsr"
    replace BuildFedCablingUsingConfigDb.Partition = "TIB_TEST_061006014917"
    #replace BuildFedCablingUsingConfigDb.MajorVersion = 8
    #replace BuildFedCablingUsingConfigDb.MinorVersion = 13   
    
    source = TBRUInputSource
    {
	untracked vstring fileNames = { "file:/tmp/gennai/RU0800891_000.root" } // path and filename of "RU" file
	untracked int32 maxEvents = -1		// number of events to process (-1 = "all")
	#untracked int32 nFeds = 1 			// overrides number of found FEDs in "RU" file 
    }
    
    include "EventFilter/SiStripRawToDigi/data/SiStripDigis.cfi"
    replace SiStripDigis.UseFedKey =false
    
    service = DaqMonitorROOTBackEnd {}
    
    # can comment out MonitorDeamon if you want to run without DQMCollector - this should go as include in DQMServices
    include "DQM/SiStripMonitorCluster/data/MonitorDaemon.cfi"
    replace MonitorDaemon.DestinationAddress = "lxplus011.cern.ch"
    
module PedsMon = SiStripMonitorPedestals
    {
	string DigiProducer="SiStripDigis"
	string OutPutFileName="prova1.root"
	untracked bool  UseFedKey = true
	bool OutputMEsInRootFile = true
        PSet PedestalsPSet =
	{
	    string CalculatorAlgorithm = "TT6"
	    int32 NumCMstripsInGroup =128
	    int32 MaskCalculationFlag =1
	    double MaskNoiseCut =3.
	    double MaskDeadCut = 0.5
	    double MaskTruncationCut = 0.05
	    double CutToAvoidSignal =3.
	    int32 NumberOfEventsForInit = 500
	    int32 NumberOfEventsForIteration = 200
	}
	
    }
    
    
    
    path p = { SiStripDigis, PedsMon}
}

